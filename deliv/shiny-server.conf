# Generated by Chef
run_as :AUTH_USER: shiny;

# Specify the authentication method to be used.
auth_pam;

preserve_logs false;

server {
  listen 8100;
  app_session_timeout 0;	
  
  # Define a location at the base URL
  location / {
    required_user *;

    # Host the directory of Shiny Apps stored in this directory
    site_dir /data/shiny-server;

    # Log all Shiny output to files in this directory
    log_dir /var/log/shiny-server;

    # When a user visits the base URL rather than a particular application,
    # an index of the applications available in this directory will be shown.
    directory_index on;

    utilization_scheduler 1 1 8;
  }
}

# Provide the admin interface on port 4151
admin 4151 {
  
  # Restrict the admin interface to the usernames listed here. Currently 
  # just one user named "admin"
  required_user *;
}
